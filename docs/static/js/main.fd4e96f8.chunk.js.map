{"version":3,"sources":["library-client.ts","components/userList.tsx","components/userAdd.tsx","components/game.tsx","components/gameList.tsx","components/theme.tsx","components/app.tsx","index.tsx"],"names":["_","require","getUserId","handle","a","key","cachedid","localStorage","getItem","JSON","parse","fetch","response","json","steamid","setItem","stringify","getGames","cachedgames","fetchGames","Promise","resolve","then","catch","alert","games","fetchLibraries","handles","fetchLibrary","fetchAll","libs","resolvedCount","i","library","length","libraries","getLibraries","getSummaries","fetchSummaries","fetchSummary","reject","getProfile","summary","err","sums","summaries","cachedprofiles","fetchProfile","console","log","profile","block","display","pointer","cursor","UserList","props","removeUserHandler","useState","setSummaries","useEffect","client","Object","keys","style","map","user","nickname","className","onClick","removeHandle","value","disabled","inline","UserAdd","addUserHandler","handleCount","setHandle","prompt","setPrompt","e","placeholder","onChange","target","onKeyPress","img","float","marginRight","marginBottom","userimg","imgs","users","Game","game","appID","name","src","logoURL","alt","avatar","medium","title","width","height","multiplayerIds","PopulateList","multiplayerOnly","output","forEach","includes","push","GameList","scroll","setGames","setLibraries","multiplayerFlag","setMultiplayerFlag","listRef","useRef","ensureData","script","document","createElement","type","innerHTML","body","appendChild","combined","owned","unique","uniqWith","isEqual","sort","b","gameA","toUpperCase","gameB","comparison","filter","obj","some","obj2","current","test","scrollIntoView","behavior","ref","event","enabled","textAlign","Theme","themeStyle","setThemeStyle","buttonStyle","setButtonStyle","window","showThemeHandler","alignCenter","header","overflow","textOverflow","whiteSpace","padding","App","setHandles","lastAction","setLastAction","cacheValue","cachedHandles","added","concat","index","indexOf","removed","splice","theme","clear","location","reload","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.fd4e96f8.chunk.js","sourcesContent":["var _ = require('lodash');\r\n\r\nconst resolveUserUrl = 'https://9192zxrrp6.execute-api.eu-west-1.amazonaws.com/default/get_steamUserIdFromHandle_Function';\r\nconst gamesListUrl = 'https://k14n0rcap5.execute-api.eu-west-1.amazonaws.com/default/get_userOwnedGames_Function';\r\nconst userSummaryUrl = 'https://8ydkm187n9.execute-api.eu-west-1.amazonaws.com/default/get_userSummary_Function';\r\n\r\n\r\nexport const process = (libraries, summaries) => {\r\n\r\n  if (!libraries || !summaries) {\r\n    return null;\r\n  }\r\n\r\n  // combine all libraries, duplicates included\r\n  let combined: any[] = [];\r\n\r\n  const keys = Object.keys(libraries);\r\n\r\n  keys.forEach(key => {\r\n    const library = libraries[key];\r\n\r\n    // wipe old data\r\n    library.forEach(game => {\r\n      delete game.owned;\r\n      delete game.users;\r\n    });\r\n\r\n    combined.push(...library);\r\n  });\r\n\r\n  // get all unique games in all libraries\r\n  let unique = _.uniqWith(combined, _.isEqual);\r\n\r\n  // order the unique games\r\n  const compare = (a, b) => {\r\n    const gameA = a.name.toUpperCase();\r\n    const gameB = b.name.toUpperCase();\r\n\r\n    let comparison = 0;\r\n    if (gameA > gameB) {\r\n      comparison = 1;\r\n    } else if (gameA < gameB) {\r\n      comparison = -1;\r\n    }\r\n    return comparison;\r\n  }\r\n\r\n  unique.sort(compare);\r\n\r\n  // count how many users own each game and add a property to record it\r\n  keys.forEach(key => {\r\n\r\n    const library = libraries[key];\r\n\r\n    // find values that are in unique list and also in library\r\n    var owned = unique.filter(function(obj) {\r\n        return library.some(function(obj2) {\r\n            return obj.appID === obj2.appID;\r\n        });\r\n    });\r\n\r\n    // loop through the owned list and increase the count in the unique list\r\n    owned.forEach(game => {\r\n\r\n      const current = unique.filter(test => test.appID === game.appID)\r\n\r\n      if (current.length === 1) {\r\n        if (current[0][\"owned\"]) {\r\n          current[0][\"owned\"]++;\r\n        } else {\r\n          current[0][\"owned\"] = 1;\r\n          current[0][\"users\"] = [];\r\n        }\r\n        current[0][\"users\"].push(summaries[key]);\r\n      }\r\n    });\r\n  });\r\n\r\n  // order by number owned\r\n  const compare2 = (a, b) => {\r\n    const gameA = a.owned;\r\n    const gameB = b.owned;\r\n\r\n    let comparison = 0;\r\n    if (gameA < gameB) {\r\n      comparison = 1;\r\n    } else if (gameA > gameB) {\r\n      comparison = -1;\r\n    }\r\n    return comparison;\r\n  }\r\n\r\n  unique.sort(compare2);\r\n\r\n  // trim off games that are only owned by 1 users\r\n  const filtered = unique.filter(test => {\r\n    return test.owned > 1\r\n  });\r\n\r\n  return filtered;\r\n}\r\n\r\n\r\n\r\nconst getUserId = async (handle: string): Promise<string> => {\r\n\r\n  const key = `${handle}_steamid`;\r\n\r\n  const cachedid = localStorage.getItem(key);\r\n  if (cachedid != null && cachedid !== '')\r\n    return JSON.parse(cachedid);\r\n\r\n  const response = await fetch(`${resolveUserUrl}?handle=${handle}`);\r\n  const steamid = await response.json();\r\n\r\n  localStorage.setItem(key, JSON.stringify(steamid));\r\n\r\n  return steamid;\r\n}\r\n\r\n\r\n\r\nconst getGames = async (steamid, handle) => {\r\n\r\n  const key = `${steamid}_games`;\r\n\r\n  const cachedgames = localStorage.getItem(key);\r\n  if (cachedgames != null && cachedgames !== '')\r\n    return JSON.parse(cachedgames);\r\n\r\n  const fetchGames = (steamid) => {\r\n    return new Promise((resolve) => {\r\n      (async () => {\r\n        await fetch(`${gamesListUrl}?steamid=${steamid}`)\r\n          .then(response => response.json())\r\n          .then(response => {\r\n            resolve(response)\r\n          })\r\n          .catch(() => {\r\n            alert(`Game list fetch failed for ${handle}. Are the games listed as public?`);\r\n            resolve(null);\r\n          });\r\n        })();\r\n      });\r\n  };\r\n\r\n  const games = await fetchGames(steamid);\r\n\r\n  if (games) {\r\n    localStorage.setItem(key, JSON.stringify(games));\r\n  }\r\n\r\n  return games;\r\n}\r\n\r\n\r\nconst fetchLibraries = async (handles) => {\r\n\r\n  const fetchLibrary = (handle) => {\r\n    return new Promise((resolve) => {\r\n      (async () => {\r\n        await getUserId(handle)\r\n          .then(async steamid => {\r\n            await getGames(steamid, handle)\r\n              .then(games => {\r\n                  resolve(games);\r\n              })\r\n          });\r\n        })();\r\n      });\r\n  };\r\n\r\n  const fetchAll = () => {\r\n\r\n    return new Promise((resolve) => {\r\n\r\n      (async () => {\r\n        let libs = {};\r\n        let resolvedCount = 0;\r\n\r\n        for (let i = 0; i < handles.length; i++) {\r\n\r\n          const handle = handles[i];\r\n\r\n          await (async () => {\r\n            const library = await fetchLibrary(handle);\r\n\r\n            if (library) {\r\n              libs[handle] = library;\r\n            }\r\n          })();\r\n\r\n          resolvedCount++;\r\n          if (resolvedCount === handles.length) {\r\n            resolve(libs);\r\n          }\r\n      }})();\r\n    });\r\n  };\r\n\r\n  const libraries = await fetchAll();\r\n  return libraries;\r\n};\r\n\r\n\r\nexport const getLibraries = async (handles) => {\r\n  return await fetchLibraries(handles);\r\n};\r\n\r\n\r\nexport const getSummaries = async (handles) => {\r\n  return await fetchSummaries(handles);\r\n};\r\n\r\n\r\nexport const fetchSummary = (handle) => {\r\n  return new Promise((resolve, reject) => {\r\n    (async () => {\r\n      await getUserId(handle)\r\n        .then(async steamid => {\r\n          await getProfile(steamid)\r\n            .then(summary => {\r\n                resolve(summary);\r\n            })\r\n            .catch(err => resolve(null));\r\n        })\r\n        .catch(err => resolve(null));\r\n      })();\r\n    });\r\n};\r\n\r\n\r\nconst fetchSummaries = async (handles) => {\r\n\r\n  const fetchAll = () => {\r\n\r\n    return new Promise((resolve) => {\r\n\r\n      (async () => {\r\n        let sums = {};\r\n        let resolvedCount = 0;\r\n\r\n        for (let i = 0; i < handles.length; i++) {\r\n\r\n          const handle = handles[i];\r\n\r\n          await (async () => {\r\n            const summary = await fetchSummary(handle);\r\n\r\n            if (summary) {\r\n              sums[handle] = summary;\r\n            }\r\n          })();\r\n\r\n          resolvedCount++;\r\n          if (resolvedCount === handles.length) {\r\n            resolve(sums);\r\n          }\r\n      }})();\r\n    });\r\n  };\r\n\r\n  const summaries = await fetchAll();\r\n  return summaries;\r\n};\r\n\r\n\r\nconst getProfile = async (steamid) => {\r\n\r\n  const key = `${steamid}_profile`;\r\n\r\n  const cachedprofiles = localStorage.getItem(key);\r\n  if (cachedprofiles != null && cachedprofiles !== '')\r\n    return JSON.parse(cachedprofiles);\r\n\r\n  const fetchProfile = (steamid) => {\r\n    return new Promise((resolve) => {\r\n      (async () => {\r\n        await fetch(`${userSummaryUrl}?steamid=${steamid}`)\r\n          .then(response => response.json())\r\n          .then(response => {\r\n            resolve(response)\r\n          })\r\n          .catch(() => {\r\n            console.log(\"User profile fetch failed\");\r\n            resolve(null);\r\n          });\r\n        })();\r\n      });\r\n  };\r\n\r\n  const profile = await fetchProfile(steamid);\r\n\r\n  if (profile) {\r\n    localStorage.setItem(key, JSON.stringify(profile));\r\n  }\r\n\r\n  return profile;\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nimport * as client from './../library-client';\r\n\r\n\r\n\r\nconst block = {\r\n  display: 'block',\r\n} as React.CSSProperties;\r\n\r\nconst pointer = {\r\n  cursor: 'pointer'\r\n} as React.CSSProperties;\r\n\r\n\r\n\r\nfunction UserList(props) {\r\n\r\n  let { handles, removeUserHandler } = props;\r\n\r\n  const [summaries, setSummaries] = useState({} as any);\r\n\r\n  useEffect(() => {\r\n\r\n    client.getSummaries(handles)\r\n      .then(sums => {\r\n        setSummaries(sums)\r\n      });\r\n\r\n  }, [handles]);\r\n\r\n  const removeHandle = handle => {\r\n    removeUserHandler(handle);\r\n  }\r\n\r\n  if (!Object.keys(summaries)) {\r\n    return null;\r\n  }\r\n\r\n  return (<div style={block}>\r\n    {\r\n      handles.map(handle => {\r\n        const user = summaries[handle];\r\n        if (user) {\r\n          return (<div key={`user_${user.nickname}`}>\r\n              <div style={block}>\r\n                <i className=\"inputIcon material-icons\" style={pointer} onClick={() => removeHandle(handle)}>remove_circle</i>\r\n                <input  className=\"inputIcon\" value={user.nickname} disabled={true} />\r\n              </div>\r\n            </div>\r\n          );\r\n        }\r\n\r\n        return null;\r\n      })\r\n    }\r\n  </div>);\r\n}\r\n\r\nexport default UserList;\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nconst block = {\r\n  display: 'block',\r\n} as React.CSSProperties;\r\n\r\nconst inline = {\r\n  display: 'inline',\r\n} as React.CSSProperties;\r\n\r\nconst pointer = {\r\n  cursor: 'pointer'\r\n} as React.CSSProperties;\r\n\r\n\r\n\r\nfunction UserAdd(props) {\r\n\r\n  let { addUserHandler, handleCount } = props;\r\n\r\n  const [handle, setHandle] = useState('');\r\n  const [prompt, setPrompt] = useState('Enter a Steam Username and press +');\r\n\r\n  useEffect(() => {\r\n\r\n    if (handleCount > 0) {\r\n      setPrompt('Enter another Steam User');\r\n    } else {\r\n      setPrompt('Enter a Steam User and press +');\r\n    }\r\n\r\n\r\n  }, [handleCount]);\r\n\r\n\r\n  const addHandle = e => {\r\n    addUserHandler(handle);\r\n    setHandle('');\r\n  }\r\n\r\n  const handleChange = e => {\r\n    setHandle(e.target.value);\r\n  }\r\n\r\n  const handleKeypress = e => {\r\n    if (e.key === 'Enter' && e.target.value !== '') {\r\n      addUserHandler(e.target.value);\r\n      setHandle('');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div style={block}>\r\n      <div style={inline}>\r\n        <i className=\"inputIcon material-icons\" style={pointer} onClick={addHandle}>add_circle</i>\r\n        <input className=\"inputIcon\" placeholder={prompt} value={handle} onChange={handleChange} onKeyPress={handleKeypress} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserAdd;\r\n","import React from 'react';\r\n\r\n\r\nconst img = {\r\n  float: 'left',\r\n  marginRight: '20px',\r\n  marginBottom: '7px'\r\n} as React.CSSProperties;\r\n\r\nconst userimg = {\r\n  marginRight: '7px',\r\n  marginBottom: '7px'\r\n} as React.CSSProperties;\r\n\r\nconst imgs = {\r\n  display: 'table',\r\n  marginBottom: '30px'\r\n} as React.CSSProperties;\r\n\r\nconst users = {\r\n  display: 'inline',\r\n} as React.CSSProperties;\r\n\r\n\r\n\r\nfunction Game(props) {\r\n\r\n  let { game } = props;\r\n  const key = `img_${game.appID}`;\r\n\r\n  return (\r\n    <div style={imgs}>\r\n      <h5>{game.name}</h5>\r\n      <img key={key} src={game.logoURL} alt={game.name} style={img} />\r\n      <div style={users}>\r\n        { game.users.map(user =>\r\n          <img key={`${key}_${user.nickname}`}\r\n               src={user.avatar.medium}\r\n               alt={user.nickname}\r\n               title={user.nickname}\r\n               style={userimg}\r\n               width=\"29\"\r\n               height=\"29\" />) }\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Game;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport Game from './game';\r\nimport * as client from './../library-client';\r\n\r\nconst multiplayerIds = require('./../data/multiplayer.json');\r\n\r\nconst marginBottom = {\r\n  marginBottom: '20px'\r\n} as React.CSSProperties;\r\n\r\n\r\n\r\nfunction PopulateList(props): any {\r\n\r\n    let { games, multiplayerOnly } = props;\r\n\r\n    if (!games || !games.length) {\r\n      return null;\r\n    }\r\n\r\n    let output: any[] = [];\r\n\r\n    games.forEach(game => {\r\n      const key = `game_${game.appID}`;\r\n\r\n      if (multiplayerOnly && !multiplayerIds.includes(game.appID)) {\r\n        return;\r\n      }\r\n\r\n      output.push(<Game key={key} game={game} />);\r\n    });\r\n\r\n    if (output.length) {\r\n      return output;\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\n\r\n\r\nfunction GameList(props) {\r\n\r\n  let { handles, scroll } = props;\r\n\r\n  const [games, setGames] = useState({} as any);\r\n  const [libraries, setLibraries] = useState({} as any);\r\n  const [summaries, setSummaries] = useState({} as any);\r\n  const [multiplayerFlag, setMultiplayerFlag] = useState(true);\r\n\r\n  const listRef = useRef(null);\r\n  const scrollToRef = (ref) => ref.current.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n  const scrollToList = () => scrollToRef(listRef);\r\n\r\n  const ensureData = () => {\r\n    if (!libraries) {\r\n      return false;\r\n    } else {\r\n      const keys = Object.keys(libraries);\r\n      if (!keys.length) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (!summaries) {\r\n      return false;\r\n    } else {\r\n      const keys = Object.keys(summaries);\r\n      if (!keys.length) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    client.getLibraries(handles)\r\n      .then(libs => {\r\n        setLibraries(libs)\r\n      });\r\n\r\n    client.getSummaries(handles)\r\n      .then(sums => {\r\n        setSummaries(sums)\r\n      });\r\n\r\n    const script = document.createElement('script');\r\n    script.type = \"text/javascript\"\r\n    script.innerHTML = `fluid.set(\"pref-multiplayerFlag\", \"${multiplayerFlag}\");`;\r\n    document.body.appendChild(script);\r\n\r\n    // eslint-disable-next-line\r\n  }, [handles]);\r\n\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    if (!ensureData()) {\r\n      return;\r\n    }\r\n\r\n    // hack-tastic, to get round async updates\r\n    if (!(handles.length === Object.keys(libraries).length &&  Object.keys(libraries).length === Object.keys(summaries).length)) {\r\n      return;\r\n    }\r\n\r\n    const games = client.process(libraries, summaries);\r\n\r\n    setGames(games);\r\n\r\n  // eslint-disable-next-line\r\n  }, [libraries, summaries]);\r\n\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    if (handles.length > 1 && scroll) {\r\n      scrollToList();\r\n    }\r\n\r\n  // eslint-disable-next-line\r\n  }, [games]);\r\n\r\n\r\n\r\n\r\n  if (handles.length < 2) {\r\n    return null;\r\n  }\r\n\r\n\r\n  if (!ensureData()) {\r\n    return null;\r\n  }\r\n\r\n\r\n\r\n  const flagHandler = (event) => {\r\n    const script = document.createElement('script');\r\n    script.type = \"text/javascript\"\r\n    script.innerHTML = `fluid.set(\"pref-multiplayerFlag\", \"${!multiplayerFlag}\");`;\r\n    document.body.appendChild(script);\r\n\r\n    setMultiplayerFlag(!multiplayerFlag);\r\n  }\r\n\r\n  return (\r\n    <div ref={listRef}>\r\n      <br />\r\n      <h4>Matched Games</h4>\r\n      <div className=\"switch pref-multiplayerFlag\" style={marginBottom} onClick={flagHandler}><span className=\"head\"></span></div>\r\n      <div className=\"label\" style={marginBottom}>Multiplayer only</div>\r\n      <PopulateList games={games} multiplayerOnly={multiplayerFlag} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default GameList;\r\n","import React, { useState, useEffect } from 'react';\r\nimport './../styles/app.css';\r\n\r\nconst enabled = {\r\n  display: 'block',\r\n  textAlign: 'center'\r\n} as React.CSSProperties;\r\n\r\nconst disabled = {\r\n  display: 'none',\r\n} as React.CSSProperties;\r\n\r\n\r\n\r\nfunction Theme(props) {\r\n\r\n  const [themeStyle, setThemeStyle] = useState(enabled);\r\n  const [buttonStyle, setButtonStyle] = useState(disabled);\r\n\r\n  useEffect(() => {\r\n\r\n    window[\"themeHandlerClient\"] = showThemeHandler;\r\n\r\n    const script = document.createElement('script');\r\n\r\n    script.type = \"text/javascript\"\r\n    script.innerHTML = `\r\n      var originalSetTheme = fluid.theme;\r\n\r\n      fluid.theme = function(value) {\r\n        window[\"themeHandlerClient\"]();\r\n        originalSetTheme(value);\r\n      };\r\n    `;\r\n\r\n    document.body.appendChild(script);\r\n\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n\r\n\r\n  const showThemeHandler = () => {\r\n    if (themeStyle === disabled) {\r\n      setThemeStyle(enabled);\r\n      setButtonStyle(disabled);\r\n    } else {\r\n      setButtonStyle(enabled);\r\n      setThemeStyle(disabled);\r\n    }\r\n  }\r\n\r\n  return (<>\r\n    <br/>\r\n    <div className=\"btns row themeSelector\" style={themeStyle}></div>\r\n    <div className=\"btn\" style={buttonStyle} onClick={showThemeHandler}>Change Theme</div>\r\n  </>);\r\n}\r\n\r\n\r\nexport default Theme;\r\n","import React, { useState, useEffect } from 'react';\r\nimport './../styles/app.css';\r\n\r\nimport UserList from './userList';\r\nimport UserAdd from './userAdd';\r\nimport GameList from './gameList';\r\nimport Theme from './theme';\r\n\r\nimport * as client from './../library-client';\r\n\r\nconst marginBottom = {\r\n  marginBottom: '60px'\r\n} as React.CSSProperties;\r\n\r\nconst alignCenter = {\r\n  textAlign: 'center'\r\n} as React.CSSProperties;\r\n\r\nconst header = {\r\n  textAlign: 'center',\r\n  overflow: 'hidden',\r\n  textOverflow: 'ellipsis',\r\n  whiteSpace: 'nowrap',\r\n  padding: '20px 0'\r\n} as React.CSSProperties;\r\n\r\n\r\nfunction App() {\r\n\r\n  const [handles, setHandles] = useState([] as string[]);\r\n  const [lastAction, setLastAction] = useState('');\r\n\r\n  useEffect(() => {\r\n\r\n    const cacheValue = localStorage.getItem(\"handles\")\r\n\r\n    if (cacheValue && cacheValue !== '') {\r\n      const cachedHandles = JSON.parse(cacheValue) as string[];\r\n      if (cachedHandles.length) {\r\n        setHandles(cachedHandles)\r\n      }\r\n    }\r\n\r\n  }, []);\r\n\r\n\r\n\r\n  const clearCacheHandler = () => {\r\n    const theme = localStorage.getItem(\"fluidTheme\") as string;\r\n    localStorage.clear();\r\n    localStorage.setItem(\"handles\", JSON.stringify(handles));\r\n    localStorage.setItem(\"fluidTheme\", theme);\r\n\r\n    window.location.reload(false);\r\n  }\r\n\r\n  const addUserHandler = async (handle) => {\r\n\r\n    if (handle === '') {\r\n      alert(\"Please enter a Steam username\");\r\n      return;\r\n    }\r\n\r\n    if (!handles.includes(handle)) {\r\n\r\n      await (async () => {\r\n        const summary = await client.fetchSummary(handle);\r\n\r\n        if (summary) {\r\n          const added = handles.concat(handle);\r\n          localStorage.setItem(\"handles\", JSON.stringify(added));\r\n          setHandles(added);\r\n          setLastAction('add');\r\n        } else {\r\n          alert(\"User not found\");\r\n          return;\r\n        }\r\n      })();\r\n    } else {\r\n      alert(\"User already added\");\r\n      return;\r\n    }\r\n  };\r\n\r\n  const removeUserHandler = async (handle) => {\r\n\r\n    if (handle === '') {\r\n      alert(\"Username not provided\");\r\n      return;\r\n    }\r\n\r\n    const index = handles.indexOf(handle);\r\n    if (index > -1) {\r\n      const removed = handles.splice(0);\r\n      removed.splice(index, 1);\r\n      localStorage.setItem(\"handles\", JSON.stringify(removed));\r\n      setHandles(removed);\r\n      setLastAction('remove');\r\n    } else {\r\n      alert(\"User not found\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"section\">\r\n        <div className=\"body\">\r\n          <Theme />\r\n        </div>\r\n        <div style={header}>\r\n          <h2>Steam Social</h2>\r\n        </div>\r\n        <div className=\"body\">\r\n          <p style={{ ...alignCenter, ...marginBottom }}>\r\n            Compare Steam libraries to help organise online multiplayer sessions with your friends.\r\n          </p>\r\n          <p style={{ ...alignCenter, ...marginBottom }}>\r\n            To use the service, ensure the accounts you are comparing have both a public profile and a public games list.\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <div className=\"section\">\r\n        <div className=\"body\">\r\n          <UserList handles={handles} removeUserHandler={removeUserHandler} />\r\n          <UserAdd addUserHandler={addUserHandler} handleCount={handles.length} />\r\n          { handles.length < 2 ? <></> : <div className=\"btn\" style={marginBottom} onClick={clearCacheHandler}>Refresh</div> }\r\n        </div>\r\n      </div>\r\n      <div className=\"section\">\r\n        <div className=\"body\">\r\n          <GameList handles={handles} scroll={lastAction === 'add'} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/app';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}