{"version":3,"sources":["components/game.tsx","library-client.ts","components/gameList.tsx","components/app.tsx","index.tsx"],"names":["img","float","marginRight","userimg","div","display","marginBottom","title","width","maxWidth","users","row","cell","textOverflow","overflow","whiteSpace","Game","props","game","key","appID","style","name","owned","map","user","nickname","src","avatar","medium","alt","logoURL","_","require","getUserId","handle","a","cachedid","localStorage","getItem","JSON","parse","fetch","response","json","steamid","setItem","stringify","getGames","cachedgames","fetchGames","Promise","resolve","then","catch","console","log","games","fetchLibraries","handles","fetchLibrary","fetchAll","libs","resolvedCount","i","library","length","libraries","getLibraries","getSummaries","fetchSummaries","fetchSummary","getProfile","summary","sums","summaries","cachedprofiles","fetchProfile","profile","PopulateList","Object","keys","combined","forEach","push","unique","uniqWith","isEqual","sort","b","gameA","toUpperCase","gameB","comparison","filter","obj","some","obj2","current","test","client","output","GameList","useState","setLibraries","setSummaries","useEffect","className","margin","App","onClick","clear","window","location","reload","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b1fe8772.chunk.js","sourcesContent":["import React from 'react';\r\n\r\n\r\nconst img = {\r\n  float: 'left',\r\n  marginRight: '20px'\r\n} as React.CSSProperties;\r\n\r\nconst userimg = {\r\n  marginRight: '10px'\r\n} as React.CSSProperties;\r\n\r\nconst div = {\r\n  display: 'table',\r\n  marginBottom: '20px'\r\n} as React.CSSProperties;\r\n\r\nconst title = {\r\n  display: 'inline-block',\r\n  width: '400px',\r\n  maxWidth: '400px',\r\n  marginRight: '20px'\r\n} as React.CSSProperties;\r\n\r\nconst users = {\r\n  display: 'inline-block',\r\n} as React.CSSProperties;\r\n\r\nconst row = {\r\n  display: 'table-row',\r\n} as React.CSSProperties;\r\n\r\nconst cell = {\r\n  display: 'table-cell',\r\n  textOverflow: 'ellipsis',\r\n  overflow: 'hidden',\r\n  width: '400px',\r\n  maxWidth: '400px',\r\n  whiteSpace: 'nowrap'\r\n} as React.CSSProperties;\r\n\r\n\r\n\r\nfunction Game(props) {\r\n\r\n  let { game } = props;\r\n  const key = `img_${game.appID}`;\r\n\r\n  return (\r\n    <div style={div}>\r\n      <div style={title}>\r\n        <h5 style={cell}>{game.name}</h5>\r\n        <h5 style={row}>x{game.owned}</h5>\r\n      </div>\r\n      <div style={users}>\r\n        { game.users.map(user => <img key={`${key}_${user.nickname}`} src={user.avatar.medium} alt={user.nickname} style={userimg} />) }\r\n      </div>\r\n      <img key={key} src={game.logoURL} alt={game.name} style={img} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Game;\r\n","var _ = require('lodash');\r\n\r\nconst resolveUserUrl = 'https://9192zxrrp6.execute-api.eu-west-1.amazonaws.com/default/get_steamUserIdFromHandle_Function';\r\nconst gamesListUrl = 'https://k14n0rcap5.execute-api.eu-west-1.amazonaws.com/default/get_userOwnedGames_Function';\r\nconst userSummaryUrl = 'https://8ydkm187n9.execute-api.eu-west-1.amazonaws.com/default/get_userSummary_Function';\r\n\r\n\r\nexport const process = (libraries, summaries) => {\r\n\r\n  if (!libraries || !summaries) {\r\n    return null;\r\n  }\r\n\r\n  // combine all libraries, duplicates included\r\n  let combined: any[] = [];\r\n\r\n  const keys = Object.keys(libraries);\r\n\r\n  keys.forEach(key => {\r\n    const library = libraries[key];\r\n    combined.push(...library);\r\n  });\r\n\r\n  // get all unique games in all libraries\r\n  let unique = _.uniqWith(combined, _.isEqual);\r\n\r\n  // order the unique games\r\n  const compare = (a, b) => {\r\n    const gameA = a.name.toUpperCase();\r\n    const gameB = b.name.toUpperCase();\r\n\r\n    let comparison = 0;\r\n    if (gameA > gameB) {\r\n      comparison = 1;\r\n    } else if (gameA < gameB) {\r\n      comparison = -1;\r\n    }\r\n    return comparison;\r\n  }\r\n\r\n  unique.sort(compare);\r\n\r\n  // count how many users own each game and add a property to record it\r\n  keys.forEach(key => {\r\n\r\n    const library = libraries[key];\r\n\r\n    // find values that are in unique list and also in library\r\n    var owned = unique.filter(function(obj) {\r\n        return library.some(function(obj2) {\r\n            return obj.appID === obj2.appID;\r\n        });\r\n    });\r\n\r\n    // loop through the owned list and increase the count in the unique list\r\n    owned.forEach(game => {\r\n\r\n      const current = unique.filter(test => test.appID === game.appID)\r\n\r\n      if (current.length === 1) {\r\n        if (current[0][\"owned\"]) {\r\n          current[0][\"owned\"]++;\r\n        } else {\r\n          current[0][\"owned\"] = 1;\r\n          current[0][\"users\"] = [];\r\n        }\r\n        current[0][\"users\"].push(summaries[key]);\r\n      }\r\n    });\r\n  });\r\n\r\n  // order by number owned\r\n  const compare2 = (a, b) => {\r\n    const gameA = a.owned;\r\n    const gameB = b.owned;\r\n\r\n    let comparison = 0;\r\n    if (gameA < gameB) {\r\n      comparison = 1;\r\n    } else if (gameA > gameB) {\r\n      comparison = -1;\r\n    }\r\n    return comparison;\r\n  }\r\n\r\n  unique.sort(compare2);\r\n\r\n  // trim off games that are only owned by 1 users\r\n  const filtered = unique.filter(test => {\r\n    return test.owned > 1\r\n  });\r\n\r\n  return filtered;\r\n}\r\n\r\n\r\n\r\nconst getUserId = async (handle: string): Promise<string> => {\r\n\r\n  const key = `${handle}_steamid`;\r\n\r\n  const cachedid = localStorage.getItem(key);\r\n  if (cachedid != null && cachedid !== '')\r\n    return JSON.parse(cachedid);\r\n\r\n  const response = await fetch(`${resolveUserUrl}?handle=${handle}`);\r\n  const steamid = await response.json();\r\n\r\n  localStorage.setItem(key, JSON.stringify(steamid));\r\n\r\n  return steamid;\r\n}\r\n\r\n\r\n\r\nconst getGames = async (steamid) => {\r\n\r\n  const key = `${steamid}_games`;\r\n\r\n  const cachedgames = localStorage.getItem(key);\r\n  if (cachedgames != null && cachedgames !== '')\r\n    return JSON.parse(cachedgames);\r\n\r\n  const fetchGames = (steamid) => {\r\n    return new Promise((resolve) => {\r\n      (async () => {\r\n        await fetch(`${gamesListUrl}?steamid=${steamid}`)\r\n          .then(response => response.json())\r\n          .then(response => {\r\n            resolve(response)\r\n          })\r\n          .catch(() => {\r\n            console.log(\"Game list fetch failed\");\r\n            resolve(null);\r\n          });\r\n        })();\r\n      });\r\n  };\r\n\r\n  const games = await fetchGames(steamid);\r\n\r\n  if (games) {\r\n    localStorage.setItem(key, JSON.stringify(games));\r\n  }\r\n\r\n  return games;\r\n}\r\n\r\n\r\nconst fetchLibraries = async (handles) => {\r\n\r\n  const fetchLibrary = (handle) => {\r\n    return new Promise((resolve) => {\r\n      (async () => {\r\n        await getUserId(handle)\r\n          .then(async steamid => {\r\n            await getGames(steamid)\r\n              .then(games => {\r\n                  resolve(games);\r\n              })\r\n          });\r\n        })();\r\n      });\r\n  };\r\n\r\n  const fetchAll = () => {\r\n\r\n    return new Promise((resolve) => {\r\n\r\n      (async () => {\r\n        let libs = {};\r\n        let resolvedCount = 0;\r\n\r\n        for (let i = 0; i < handles.length; i++) {\r\n\r\n          const handle = handles[i];\r\n\r\n          await (async () => {\r\n            const library = await fetchLibrary(handle);\r\n\r\n            if (library) {\r\n              libs[handle] = library;\r\n            }\r\n          })();\r\n\r\n          resolvedCount++;\r\n          if (resolvedCount === handles.length) {\r\n            resolve(libs);\r\n          }\r\n      }})();\r\n    });\r\n  };\r\n\r\n  const libraries = await fetchAll();\r\n  return libraries;\r\n};\r\n\r\n\r\nexport const getLibraries = async (handles) => {\r\n  return await fetchLibraries(handles);\r\n};\r\n\r\n\r\nexport const getSummaries = async (handles) => {\r\n  return await fetchSummaries(handles);\r\n};\r\n\r\n\r\nconst fetchSummaries = async (handles) => {\r\n\r\n  const fetchSummary = (handle) => {\r\n    return new Promise((resolve) => {\r\n      (async () => {\r\n        await getUserId(handle)\r\n          .then(async steamid => {\r\n            await getProfile(steamid)\r\n              .then(summary => {\r\n                  resolve(summary);\r\n              })\r\n          });\r\n        })();\r\n      });\r\n  };\r\n\r\n  const fetchAll = () => {\r\n\r\n    return new Promise((resolve) => {\r\n\r\n      (async () => {\r\n        let sums = {};\r\n        let resolvedCount = 0;\r\n\r\n        for (let i = 0; i < handles.length; i++) {\r\n\r\n          const handle = handles[i];\r\n\r\n          await (async () => {\r\n            const summary = await fetchSummary(handle);\r\n\r\n            if (summary) {\r\n              sums[handle] = summary;\r\n            }\r\n          })();\r\n\r\n          resolvedCount++;\r\n          if (resolvedCount === handles.length) {\r\n            resolve(sums);\r\n          }\r\n      }})();\r\n    });\r\n  };\r\n\r\n  const summaries = await fetchAll();\r\n  return summaries;\r\n};\r\n\r\n\r\nconst getProfile = async (steamid) => {\r\n\r\n  const key = `${steamid}_profile`;\r\n\r\n  const cachedprofiles = localStorage.getItem(key);\r\n  if (cachedprofiles != null && cachedprofiles !== '')\r\n    return JSON.parse(cachedprofiles);\r\n\r\n  const fetchProfile = (steamid) => {\r\n    return new Promise((resolve) => {\r\n      (async () => {\r\n        await fetch(`${userSummaryUrl}?steamid=${steamid}`)\r\n          .then(response => response.json())\r\n          .then(response => {\r\n            resolve(response)\r\n          })\r\n          .catch(() => {\r\n            console.log(\"User profile fetch failed\");\r\n            resolve(null);\r\n          });\r\n        })();\r\n      });\r\n  };\r\n\r\n  const profile = await fetchProfile(steamid);\r\n\r\n  if (profile) {\r\n    localStorage.setItem(key, JSON.stringify(profile));\r\n  }\r\n\r\n  return profile;\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport Game from './game';\r\n\r\nimport * as client from './../library-client';\r\n\r\n\r\n\r\nfunction PopulateList(props): any {\r\n\r\n  let { libraries, summaries } = props;\r\n\r\n  if (!libraries) {\r\n    console.log(\"Libraries empty\");\r\n    return null;\r\n  } else {\r\n    const keys = Object.keys(libraries);\r\n    if (!keys.length) {\r\n      console.log(\"Libraries empty\");\r\n      return null;\r\n    }\r\n  }\r\n\r\n  if (!summaries) {\r\n    console.log(\"Summaries empty\");\r\n    return null;\r\n  } else {\r\n    const keys = Object.keys(summaries);\r\n    if (!keys.length) {\r\n      console.log(\"Summaries empty\");\r\n      return null;\r\n    }\r\n  }\r\n\r\n  const games = client.process(libraries, summaries);\r\n  if (!games || !games.length) {\r\n    console.log(\"Games empty\");\r\n    return null;\r\n  }\r\n\r\n  let output: any[] = [];\r\n\r\n  games.forEach(game => {\r\n    const key = `game_${game.appID}`;\r\n    output.push(<Game key={key} game={game} />);\r\n  });\r\n\r\n  if (output.length) {\r\n    return output;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n\r\n\r\n\r\n\r\nfunction GameList() {\r\n\r\n  const [libraries, setLibraries] = useState({} as any);\r\n  const [summaries, setSummaries] = useState({} as any);\r\n\r\n  useEffect(() => {\r\n\r\n    const handles: string[] =\r\n    [\r\n      'steviedisco',\r\n      'delphboy',\r\n      'chipbarm',\r\n      'StealthBanana',\r\n      'andreas3115',\r\n    ];\r\n\r\n    client.getLibraries(handles)\r\n      .then(libs => {\r\n        setLibraries(libs)\r\n      });\r\n\r\n    client.getSummaries(handles)\r\n      .then(sums => {\r\n        setSummaries(sums)\r\n      });\r\n\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"section\">\r\n        <PopulateList libraries={libraries} summaries={summaries} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default GameList;\r\n","import React from 'react';\nimport './../styles/app.css';\n\nimport GameList from './gameList';\n\n\nconst margin = {\n  marginBottom: '20px'\n} as React.CSSProperties;\n\n\nfunction App() {\n\n  const clearCacheHandler = () => {\n    localStorage.clear();\n    window.location.reload(false);\n  }\n\n  return (\n    <>\n      <div className=\"container\">\n        <div className=\"section\">\n          <div className=\"header\">\n            <h1>Steam Room</h1>\n          </div>\n          <pre>\n            <code className=\"prettyprint prettyprinted\">\n              Compare Steam libraries to help organise online multiplayer sessions with your friends.\n            </code>\n          </pre>\n        </div>\n        <div className=\"btn\" style={margin} onClick={clearCacheHandler}>Clear cache</div>\n      </div>\n      <GameList />\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/app';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}