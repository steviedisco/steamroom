{"version":3,"sources":["library-client.ts","components/userList.tsx","components/userAdd.tsx","components/game.tsx","components/gameList.tsx","components/theme.tsx","components/alert.tsx","components/app.tsx","index.tsx"],"names":["_","require","getUserId","handle","token","a","key","cachedid","localStorage","getItem","JSON","parse","fetch","method","headers","response","json","steamid","setItem","stringify","getGames","cachedgames","undefined","fetchGames","Promise","resolve","then","catch","alert","games","fetchLibraries","handles","fetchLibrary","fetchAll","libs","resolvedCount","i","library","length","libraries","getLibraries","getSummaries","fetchSummaries","fetchSummary","getProfile","summary","sums","summaries","cachedprofiles","fetchProfile","console","log","profile","verifyRecaptcha","callback","body","block","display","pointer","cursor","UserList","props","removeUserHandler","useState","setSummaries","useEffect","client","Object","keys","style","map","user","nickname","className","onClick","removeHandle","value","disabled","ref","node","setProperty","src","avatar","medium","alt","title","width","height","inline","UserAdd","addUserHandler","handleCount","setHandle","prompt","setPrompt","jwt","setJwt","window","addHandle","tryAddHandle","script","document","createElement","type","innerHTML","appendChild","placeholder","onChange","e","target","onKeyPress","img","float","marginRight","marginBottom","userimg","imgs","users","Game","game","appID","name","logoURL","multiplayerIds","PopulateList","multiplayerOnly","output","forEach","includes","push","GameList","scroll","setGames","setLibraries","multiplayerFlag","setMultiplayerFlag","listRef","useRef","ensureData","combined","owned","unique","uniqWith","isEqual","sort","b","gameA","toUpperCase","gameB","comparison","filter","obj","some","obj2","current","test","scrollIntoView","behavior","scrollToList","enabled","textAlign","Theme","themeStyle","setThemeStyle","buttonStyle","setButtonStyle","showThemeHandler","StyledPopup","styled","Popup","Alert","content","onClose","open","setOpen","closeOnDocumentClick","alignCenter","header","overflow","textOverflow","whiteSpace","padding","App","setHandles","lastAction","setLastAction","alertContent","setAlertContent","cacheValue","cachedHandles","added","concat","index","indexOf","removed","splice","clearCacheButton","theme","clear","location","reload","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.72935737.chunk.js","sourcesContent":["var _ = require('lodash');\r\n\r\nconst verifyCaptchaUrl = 'https://54z0aarbpc.execute-api.eu-west-1.amazonaws.com/default/verify_reCaptcha_Function';\r\nconst resolveUserUrl = 'https://9192zxrrp6.execute-api.eu-west-1.amazonaws.com/default/get_steamUserIdFromHandle_Function';\r\nconst gamesListUrl = 'https://k14n0rcap5.execute-api.eu-west-1.amazonaws.com/default/get_userOwnedGames_Function';\r\nconst userSummaryUrl = 'https://8ydkm187n9.execute-api.eu-west-1.amazonaws.com/default/get_userSummary_Function';\r\n\r\n\r\nexport const process = (libraries, summaries) => {\r\n\r\n  if (!libraries || !summaries) {\r\n    return null;\r\n  }\r\n\r\n  // combine all libraries, duplicates included\r\n  let combined: any[] = [];\r\n\r\n  const keys = Object.keys(libraries);\r\n\r\n  keys.forEach(key => {\r\n    const library = libraries[key];\r\n\r\n    // wipe old data\r\n    library.forEach(game => {\r\n      delete game.owned;\r\n      delete game.users;\r\n    });\r\n\r\n    combined.push(...library);\r\n  });\r\n\r\n  // get all unique games in all libraries\r\n  let unique = _.uniqWith(combined, _.isEqual);\r\n\r\n  // order the unique games\r\n  const compare = (a, b) => {\r\n    const gameA = a.name.toUpperCase();\r\n    const gameB = b.name.toUpperCase();\r\n\r\n    let comparison = 0;\r\n    if (gameA > gameB) {\r\n      comparison = 1;\r\n    } else if (gameA < gameB) {\r\n      comparison = -1;\r\n    }\r\n    return comparison;\r\n  }\r\n\r\n  unique.sort(compare);\r\n\r\n  // count how many users own each game and add a property to record it\r\n  keys.forEach(key => {\r\n\r\n    const library = libraries[key];\r\n\r\n    // find values that are in unique list and also in library\r\n    var owned = unique.filter(function(obj) {\r\n        return library.some(function(obj2) {\r\n            return obj.appID === obj2.appID;\r\n        });\r\n    });\r\n\r\n    // loop through the owned list and increase the count in the unique list\r\n    owned.forEach(game => {\r\n\r\n      const current = unique.filter(test => test.appID === game.appID)\r\n\r\n      if (current.length === 1) {\r\n        if (current[0][\"owned\"]) {\r\n          current[0][\"owned\"]++;\r\n        } else {\r\n          current[0][\"owned\"] = 1;\r\n          current[0][\"users\"] = [];\r\n        }\r\n        current[0][\"users\"].push(summaries[key]);\r\n      }\r\n    });\r\n  });\r\n\r\n  // order by number owned\r\n  const compare2 = (a, b) => {\r\n    const gameA = a.owned;\r\n    const gameB = b.owned;\r\n\r\n    let comparison = 0;\r\n    if (gameA < gameB) {\r\n      comparison = 1;\r\n    } else if (gameA > gameB) {\r\n      comparison = -1;\r\n    }\r\n    return comparison;\r\n  }\r\n\r\n  unique.sort(compare2);\r\n\r\n  // trim off games that are only owned by 1 users\r\n  const filtered = unique.filter(test => {\r\n    return test.owned > 1\r\n  });\r\n\r\n  return filtered;\r\n}\r\n\r\n\r\n\r\nconst getUserId = async (handle: string, token): Promise<string> => {\r\n\r\n  const key = `${handle}_steamid`;\r\n\r\n  const cachedid = localStorage.getItem(key);\r\n  if (cachedid != null && cachedid !== '')\r\n    return JSON.parse(cachedid);\r\n\r\n  const response = await fetch(`${resolveUserUrl}?handle=${handle}`, {\r\n            method: 'GET',\r\n            headers: {\r\n                \"Authorization\": `Bearer ${token}`\r\n            }\r\n        });\r\n\r\n  const steamid = await response.json();\r\n\r\n  localStorage.setItem(key, JSON.stringify(steamid));\r\n\r\n  return steamid;\r\n}\r\n\r\n\r\n\r\nconst getGames = async (steamid, handle, token) => {\r\n\r\n  const key = `${steamid}_games`;\r\n\r\n  const cachedgames = localStorage.getItem(key);\r\n  if (cachedgames && cachedgames !== undefined && cachedgames !== '') {\r\n    try {\r\n       return JSON.parse(cachedgames);\r\n    }\r\n    catch {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  const fetchGames = (steamid) => {\r\n    return new Promise((resolve) => {\r\n      (async () => {\r\n        await fetch(`${gamesListUrl}?steamid=${steamid}`, {\r\n                  method: 'GET',\r\n                  headers: {\r\n                      \"Authorization\": `Bearer ${token}`\r\n                  }\r\n              })\r\n          .then(response => response.json())\r\n          .then(response => {\r\n            resolve(response)\r\n          })\r\n          .catch(() => {\r\n            alert(`Game list fetch failed for ${handle}. Are the games listed as public?`);\r\n            resolve(null);\r\n          });\r\n        })();\r\n      });\r\n  };\r\n\r\n  const games = await fetchGames(steamid);\r\n\r\n  if (games) {\r\n    localStorage.setItem(key, JSON.stringify(games));\r\n  }\r\n\r\n  return games;\r\n}\r\n\r\n\r\nconst fetchLibraries = async (handles, token) => {\r\n\r\n  const fetchLibrary = (handle, token) => {\r\n    return new Promise((resolve) => {\r\n      (async () => {\r\n        await getUserId(handle, token)\r\n          .then(async steamid => {\r\n            await getGames(steamid, handle, token)\r\n              .then(games => {\r\n                  resolve(games);\r\n              })\r\n          });\r\n        })();\r\n      });\r\n  };\r\n\r\n  const fetchAll = (token) => {\r\n\r\n    return new Promise((resolve) => {\r\n\r\n      (async () => {\r\n        let libs = {};\r\n        let resolvedCount = 0;\r\n\r\n        for (let i = 0; i < handles.length; i++) {\r\n\r\n          const handle = handles[i];\r\n\r\n          await (async () => {\r\n            const library = await fetchLibrary(handle, token);\r\n\r\n            if (library) {\r\n              libs[handle] = library;\r\n            }\r\n          })();\r\n\r\n          resolvedCount++;\r\n          if (resolvedCount === handles.length) {\r\n            resolve(libs);\r\n          }\r\n      }})();\r\n    });\r\n  };\r\n\r\n  const libraries = await fetchAll(token);\r\n  return libraries;\r\n};\r\n\r\n\r\nexport const getLibraries = async (handles, token) => {\r\n  return await fetchLibraries(handles, token);\r\n};\r\n\r\n\r\nexport const getSummaries = async (handles, token) => {\r\n  return await fetchSummaries(handles, token);\r\n};\r\n\r\n\r\nexport const fetchSummary = (handle, token) => {\r\n  return new Promise((resolve) => {\r\n    (async () => {\r\n      await getUserId(handle, token)\r\n        .then(async steamid => {\r\n          await getProfile(steamid, token)\r\n            .then(summary => {\r\n                resolve(summary);\r\n            })\r\n            .catch(() => resolve(null));\r\n        })\r\n        .catch(() => resolve(null));\r\n      })();\r\n    });\r\n};\r\n\r\n\r\nconst fetchSummaries = async (handles, token) => {\r\n\r\n  const fetchAll = (token) => {\r\n\r\n    return new Promise((resolve) => {\r\n\r\n      (async () => {\r\n        let sums = {};\r\n        let resolvedCount = 0;\r\n\r\n        for (let i = 0; i < handles.length; i++) {\r\n\r\n          const handle = handles[i];\r\n\r\n          await (async () => {\r\n            const summary = await fetchSummary(handle, token);\r\n\r\n            if (summary) {\r\n              sums[handle] = summary;\r\n            }\r\n          })();\r\n\r\n          resolvedCount++;\r\n          if (resolvedCount === handles.length) {\r\n            resolve(sums);\r\n          }\r\n      }})();\r\n    });\r\n  };\r\n\r\n  const summaries = await fetchAll(token);\r\n  return summaries;\r\n};\r\n\r\n\r\nconst getProfile = async (steamid, token) => {\r\n\r\n  const key = `${steamid}_profile`;\r\n\r\n  const cachedprofiles = localStorage.getItem(key);\r\n  if (cachedprofiles != null && cachedprofiles !== '')\r\n    return JSON.parse(cachedprofiles);\r\n\r\n  const fetchProfile = (steamid, token) => {\r\n    return new Promise((resolve) => {\r\n      (async () => {\r\n        await fetch(`${userSummaryUrl}?steamid=${steamid}`, {\r\n                  method: 'GET',\r\n                  headers: {\r\n                      \"Authorization\": `Bearer ${token}`\r\n                  }\r\n              })\r\n          .then(response => response.json())\r\n          .then(response => {\r\n            resolve(response)\r\n          })\r\n          .catch(() => {\r\n            console.log(\"User profile fetch failed\");\r\n            resolve(null);\r\n          });\r\n        })();\r\n      });\r\n  };\r\n\r\n  const profile = await fetchProfile(steamid, token);\r\n\r\n  if (profile) {\r\n    localStorage.setItem(key, JSON.stringify(profile));\r\n  }\r\n\r\n  return profile;\r\n}\r\n\r\n\r\n\r\nexport const verifyRecaptcha = (token, callback) => {\r\n\r\n  fetch(`${verifyCaptchaUrl}`, {\r\n    method: 'POST',\r\n    body: JSON.stringify({ 'token': token })\r\n  })\r\n  .then(response => response.json())\r\n  .then(response => {\r\n    callback(response);\r\n  })\r\n  .catch(() => {\r\n    console.log(`Recaptcha verification failed`);\r\n  });\r\n\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport * as client from './../library-client';\r\n\r\n\r\n\r\nconst block = {\r\n  display: 'block',\r\n} as React.CSSProperties;\r\n\r\nconst pointer = {\r\n  cursor: 'pointer'\r\n} as React.CSSProperties;\r\n\r\n\r\n\r\nexport default function UserList(props) {\r\n\r\n  let { handles, removeUserHandler, token } = props;\r\n\r\n  const [summaries, setSummaries] = useState({} as any);\r\n\r\n  useEffect(() => {\r\n\r\n    if (!token || token === '') {\r\n      return;\r\n    }\r\n\r\n    client.getSummaries(handles, token)\r\n      .then(sums => {\r\n        setSummaries(sums)\r\n      });\r\n\r\n  // eslint-disable-next-line\r\n}, [handles, token]);\r\n\r\n  const removeHandle = handle => {\r\n    removeUserHandler(handle);\r\n  }\r\n\r\n  if (!Object.keys(summaries)) {\r\n    return null;\r\n  }\r\n\r\n  return (<div style={block}>\r\n    {\r\n      handles.map(handle => {\r\n        const user = summaries[handle];\r\n        if (user) {\r\n          return (<div key={`user_${user.nickname}`}>\r\n              <div style={block}>\r\n                <i className=\"inputIcon material-icons\" style={pointer} onClick={() => removeHandle(handle)}>remove_circle</i>\r\n                <input className=\"inputIcon\" value={user.nickname} disabled={true}\r\n                  ref={(node) => {\r\n                   if (node) {\r\n                     node.style.setProperty(\"max-width\", \"290px\", \"important\");\r\n                   }\r\n                 }} />\r\n                 <img src={user.avatar.medium}\r\n                      alt=\"\"\r\n                      title={user.nickname}\r\n                      width=\"30\"\r\n                      height=\"30\"\r\n                      ref={(node) => {\r\n                       if (node) {\r\n                         node.style.setProperty(\"position\", \"relative\");\r\n                         node.style.setProperty(\"top\", \"10px\");\r\n                         node.style.setProperty(\"margin-left\", \"10px\");\r\n                       }\r\n                     }} />\r\n              </div>\r\n            </div>\r\n          );\r\n        }\r\n\r\n        return null;\r\n      })\r\n    }\r\n  </div>);\r\n}\r\n\r\nUserList.propTypes = {\r\n  handles: PropTypes.any.isRequired,\r\n  removeUserHandler: PropTypes.any.isRequired,\r\n  token: PropTypes.any.isRequired,\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport * as client from './../library-client';\r\n\r\nconst block = {\r\n  display: 'block',\r\n} as React.CSSProperties;\r\n\r\nconst inline = {\r\n  display: 'inline',\r\n} as React.CSSProperties;\r\n\r\nconst pointer = {\r\n  cursor: 'pointer'\r\n} as React.CSSProperties;\r\n\r\n\r\nexport default function UserAdd(props) {\r\n\r\n  let { addUserHandler, handleCount } = props;\r\n\r\n  const [handle, setHandle] = useState('');\r\n  const [prompt, setPrompt] = useState('Enter a Steam Username and press +');\r\n  const [jwt, setJwt] = useState('');\r\n\r\n  useEffect(() => {\r\n\r\n    if (handleCount > 0) {\r\n      setPrompt('Enter another Steam User');\r\n    } else {\r\n      setPrompt('Enter a Steam User and press +');\r\n    }\r\n\r\n  }, [handleCount]);\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    window[\"verifyRecaptcha\"] = client.verifyRecaptcha;\r\n    window[\"addHandle\"] = addHandle;\r\n\r\n  // eslint-disable-next-line\r\n  }, []);\r\n\r\n\r\n\r\n  const addHandle = (handle, jwt) => {\r\n    addUserHandler(handle, jwt);\r\n    setJwt(jwt);\r\n    setHandle('');\r\n  }\r\n\r\n\r\n\r\n  const tryAddHandle = () => {\r\n\r\n    if (handle === '') {\r\n      addUserHandler('', '');\r\n      return;\r\n    }\r\n\r\n    if (jwt && jwt !== '') {\r\n      addHandle(handle, jwt);\r\n      return;\r\n    }\r\n\r\n    const script = document.createElement('script');\r\n\r\n    script.type = \"text/javascript\";\r\n    script.innerHTML = `\r\n      grecaptcha.ready(function(){\r\n        grecaptcha.execute(\"6LfDq_MUAAAAAB_Kefr15OvioLopWcs2YELeXbP9\", {action: 'homepage'}).then(function(token) {\r\n          window[\"verifyRecaptcha\"](token, (jwt) => {\r\n            if (jwt && jwt !== '') {\r\n              window[\"addHandle\"]('${handle}', jwt);\r\n            }\r\n          })\r\n        })\r\n      });\r\n    `;\r\n\r\n    document.body.appendChild(script);\r\n  }\r\n\r\n\r\n\r\n  const handleChange = e => {\r\n    setHandle(e.target.value);\r\n  }\r\n\r\n  const handleKeypress = e => {\r\n    if (e.key === 'Enter') {\r\n      tryAddHandle();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <div style={block}>\r\n      <div style={inline}>\r\n        <i className=\"inputIcon material-icons\" style={pointer} onClick={tryAddHandle}>add_circle</i>\r\n        <input className=\"inputIcon\" placeholder={prompt} value={handle} onChange={handleChange} onKeyPress={handleKeypress}\r\n          ref={(node) => {\r\n             if (node) {\r\n               node.style.setProperty(\"max-width\", \"300px\", \"important\");\r\n             }\r\n           }} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\nUserAdd.propTypes = {\r\n  addUserHandler: PropTypes.any.isRequired,\r\n  handleCount: PropTypes.any.isRequired,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst img = {\r\n  float: 'left',\r\n  marginRight: '20px',\r\n  marginBottom: '7px'\r\n} as React.CSSProperties;\r\n\r\nconst userimg = {\r\n  marginRight: '7px',\r\n  marginBottom: '7px'\r\n} as React.CSSProperties;\r\n\r\nconst imgs = {\r\n  display: 'table',\r\n  marginBottom: '30px'\r\n} as React.CSSProperties;\r\n\r\nconst users = {\r\n  display: 'inline',\r\n} as React.CSSProperties;\r\n\r\n\r\n\r\nexport default function Game(props) {\r\n\r\n  let { game } = props;\r\n  const key = `img_${game.appID}`;\r\n\r\n  return (\r\n    <div style={imgs}>\r\n      <h5>{game.name}</h5>\r\n      <img key={key} src={game.logoURL} alt={game.name} style={img} />\r\n      <div style={users}>\r\n        { game.users.map(user =>\r\n          <img key={`${key}_${user.nickname}`}\r\n               src={user.avatar.medium}\r\n               alt={user.nickname}\r\n               title={user.nickname}\r\n               style={userimg}\r\n               width=\"29\"\r\n               height=\"29\" />) }\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nGame.propTypes = {\r\n  game: PropTypes.any.isRequired,\r\n};\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Game from './game';\r\nimport * as client from './../library-client';\r\n\r\nconst multiplayerIds = require('./../data/multiplayer.json');\r\n\r\nconst marginBottom = {\r\n  marginBottom: '20px'\r\n} as React.CSSProperties;\r\n\r\n\r\n\r\nfunction PopulateList(props): any {\r\n\r\n    let { games, multiplayerOnly } = props;\r\n\r\n    if (!games || !games.length) {\r\n      return null;\r\n    }\r\n\r\n    let output: any[] = [];\r\n\r\n    games.forEach(game => {\r\n      const key = `game_${game.appID}`;\r\n\r\n      if (multiplayerOnly && !multiplayerIds.includes(game.appID)) {\r\n        return;\r\n      }\r\n\r\n      output.push(<Game key={key} game={game} />);\r\n    });\r\n\r\n    if (output.length) {\r\n      return output;\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\n\r\n\r\nexport default function GameList(props) {\r\n\r\n  let { handles, scroll, token } = props;\r\n\r\n  const [games, setGames] = useState({} as any);\r\n  const [libraries, setLibraries] = useState({} as any);\r\n  const [summaries, setSummaries] = useState({} as any);\r\n  const [multiplayerFlag, setMultiplayerFlag] = useState(true);\r\n\r\n  const listRef = useRef(null);\r\n\r\n  const scrollToRef = (ref) => {\r\n    if (ref.current) {\r\n\r\n      ref.current.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n    }\r\n  }\r\n\r\n  const scrollToList = () => {\r\n    if (listRef) {\r\n      scrollToRef(listRef)\r\n    }\r\n  };\r\n\r\n  const ensureData = () => {\r\n    if (!libraries) {\r\n      return false;\r\n    } else {\r\n      const keys = Object.keys(libraries);\r\n      if (!keys.length) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (!summaries) {\r\n      return false;\r\n    } else {\r\n      const keys = Object.keys(summaries);\r\n      if (!keys.length) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    if (!token || token === '') {\r\n      return;\r\n    }\r\n\r\n    client.getLibraries(handles, token)\r\n      .then(libs => {\r\n        setLibraries(libs)\r\n      });\r\n\r\n    client.getSummaries(handles, token)\r\n      .then(sums => {\r\n        setSummaries(sums)\r\n      });\r\n\r\n  // eslint-disable-next-line\r\n  }, [handles, token]);\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    if (!ensureData()) {\r\n      return;\r\n    }\r\n\r\n    // hack-tastic, to get round async updates\r\n    if (!(handles.length === Object.keys(libraries).length &&  Object.keys(libraries).length === Object.keys(summaries).length)) {\r\n      return;\r\n    }\r\n\r\n    const games = client.process(libraries, summaries);\r\n\r\n    setGames(games);\r\n\r\n  // eslint-disable-next-line\r\n  }, [libraries, summaries]);\r\n\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    if (handles.length > 1 && scroll) {\r\n      scrollToList();\r\n    }\r\n\r\n  // eslint-disable-next-line\r\n  }, [games]);\r\n\r\n\r\n\r\n  if (handles.length < 2) {\r\n    return null;\r\n  }\r\n\r\n\r\n  if (!ensureData()) {\r\n    return null;\r\n  }\r\n\r\n\r\n\r\n  const flagHandler = () => {\r\n    setMultiplayerFlag(!multiplayerFlag);\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <div ref={listRef}>\r\n      <br />\r\n      <h4>Matched Games</h4>\r\n      <div className={`switch ${multiplayerFlag ? 'active' : ''}`} style={marginBottom} onClick={flagHandler}><span className=\"head\"></span></div>\r\n      <div className=\"label\" style={marginBottom}>Multiplayer only</div>\r\n      <PopulateList games={games} multiplayerOnly={multiplayerFlag} />\r\n    </div>\r\n  );\r\n}\r\n\r\nGameList.propTypes = {\r\n  handles: PropTypes.any.isRequired,\r\n  scroll: PropTypes.any.isRequired,\r\n  token: PropTypes.any.isRequired\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport './../styles/app.css';\r\n\r\nconst enabled = {\r\n  display: 'block',\r\n  textAlign: 'center'\r\n} as React.CSSProperties;\r\n\r\nconst disabled = {\r\n  display: 'none',\r\n} as React.CSSProperties;\r\n\r\n\r\n\r\nexport default function Theme() {\r\n\r\n  const [themeStyle, setThemeStyle] = useState(enabled);\r\n  const [buttonStyle, setButtonStyle] = useState(disabled);\r\n\r\n  useEffect(() => {\r\n\r\n    window[\"themeHandlerClient\"] = showThemeHandler;\r\n\r\n    const script = document.createElement('script');\r\n\r\n    script.type = \"text/javascript\"\r\n    script.innerHTML = `\r\n      var originalSetTheme = fluid.theme;\r\n\r\n      fluid.theme = function(value) {\r\n        window[\"themeHandlerClient\"]();\r\n        originalSetTheme(value);\r\n      };\r\n    `;\r\n\r\n    document.body.appendChild(script);\r\n\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n\r\n\r\n  const showThemeHandler = () => {\r\n    if (themeStyle === disabled) {\r\n      setThemeStyle(enabled);\r\n      setButtonStyle(disabled);\r\n    } else {\r\n      setButtonStyle(enabled);\r\n      setThemeStyle(disabled);\r\n    }\r\n  }\r\n\r\n  return (<>\r\n    <br/>\r\n    <div className=\"btns row themeSelector\" style={themeStyle}></div>\r\n    <div className=\"btn\" style={buttonStyle} onClick={showThemeHandler}>Change Theme</div>\r\n  </>);\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Popup from \"reactjs-popup\";\r\nimport styled from 'styled-components';\r\n\r\nimport './../styles/app.css';\r\n\r\n\r\nconst StyledPopup = styled(Popup)`\r\n  &-overlay {\r\n   ...\r\n  }\r\n  // use your custom style for \".popup-content\"\r\n  &-content {\r\n   width: auto !important;\r\n   font-size: 30px !important;\r\n   color: #3D4F66 !important;\r\n   font-family: var(--textFont) !important;\r\n   background-color: #eee !important;\r\n   padding: 15px !important;\r\n   text-align: center !important;\r\n   font-weight: bold !important;\r\n  }\r\n`\r\n\r\nexport default function Alert(props) {\r\n\r\n  let { content, onClose } = props;\r\n\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const openModal = () => {\r\n    setOpen(true);\r\n  }\r\n  const closeModal = () => {\r\n    setOpen(false);\r\n    onClose();\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (content !== '') {\r\n      openModal();\r\n    }\r\n  // eslint-disable-next-line\r\n  }, [content]);\r\n\r\n  return (\r\n    <div>\r\n      <StyledPopup\r\n        open={open}\r\n        closeOnDocumentClick\r\n        onClose={closeModal}>\r\n        {content}\r\n      </StyledPopup>\r\n    </div>\r\n  );\r\n}\r\n\r\nAlert.propTypes = {\r\n  content: PropTypes.any.isRequired,\r\n  onClose: PropTypes.any.isRequired\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nimport './../styles/app.css';\r\n\r\nimport UserList from './userList';\r\nimport UserAdd from './userAdd';\r\nimport GameList from './gameList';\r\nimport Theme from './theme';\r\nimport Alert from './alert';\r\n\r\nimport * as client from './../library-client';\r\n\r\nconst marginBottom = {\r\n  marginBottom: '60px'\r\n} as React.CSSProperties;\r\n\r\nconst alignCenter = {\r\n  textAlign: 'center'\r\n} as React.CSSProperties;\r\n\r\nconst header = {\r\n  textAlign: 'center',\r\n  overflow: 'hidden',\r\n  textOverflow: 'ellipsis',\r\n  whiteSpace: 'nowrap',\r\n  padding: '20px 0'\r\n} as React.CSSProperties;\r\n\r\n\r\n\r\nfunction App() {\r\n\r\n  const [handles, setHandles] = useState([] as string[]);\r\n  const [lastAction, setLastAction] = useState('');\r\n  const [alertContent, setAlertContent] = useState('');\r\n  const [jwt, setJwt] = useState('');\r\n\r\n  useEffect(() => {\r\n\r\n    const cacheValue = localStorage.getItem(\"handles\")\r\n\r\n    if (cacheValue && cacheValue !== '') {\r\n      const cachedHandles = JSON.parse(cacheValue) as string[];\r\n      if (cachedHandles.length) {\r\n\r\n        window[\"verifyRecaptcha\"] = client.verifyRecaptcha;\r\n        window[\"setJwt\"] = setJwt;\r\n        window[\"setHandles\"] = setHandles;\r\n        window[\"cachedHandles\"] = cachedHandles;\r\n\r\n        const script = document.createElement('script');\r\n\r\n        script.type = \"text/javascript\"\r\n        script.innerHTML = `\r\n          grecaptcha.ready(function(){\r\n            grecaptcha.execute(\"6LfDq_MUAAAAAB_Kefr15OvioLopWcs2YELeXbP9\", {action: 'homepage'}).then(function(token) {\r\n              window[\"verifyRecaptcha\"](token, (jwt) => {\r\n                if (jwt && jwt !== '') {\r\n                  window[\"setHandles\"](window[\"cachedHandles\"]);\r\n                  window[\"setJwt\"](jwt);\r\n                }\r\n              })\r\n            })\r\n          });\r\n        `;\r\n\r\n        document.body.appendChild(script);\r\n      }\r\n    }\r\n\r\n  }, []);\r\n\r\n\r\n\r\n  const clearCacheHandler = () => {\r\n    const theme = localStorage.getItem(\"fluidTheme\") as string;\r\n    localStorage.clear();\r\n    localStorage.setItem(\"handles\", JSON.stringify(handles));\r\n    localStorage.setItem(\"fluidTheme\", theme);\r\n\r\n    window.location.reload(false);\r\n  }\r\n\r\n\r\n\r\n  const addUserHandler = async (handle, token) => {\r\n\r\n    if (handle === '') {\r\n      setAlertContent(\"Please enter a valid Steam user\");\r\n      return;\r\n    }\r\n\r\n    if (token !== '') {\r\n      setJwt(token);\r\n    }\r\n\r\n    if (!handles.includes(handle)) {\r\n\r\n      await (async () => {\r\n        const summary = await client.fetchSummary(handle, token);\r\n\r\n        if (summary) {\r\n          const added = handles.concat(handle);\r\n          localStorage.setItem(\"handles\", JSON.stringify(added));\r\n          setHandles(added);\r\n          setLastAction('add');\r\n        } else {\r\n          setAlertContent(\"User not found - is the user's profile public?\");\r\n          return;\r\n        }\r\n      })();\r\n    } else {\r\n      setAlertContent(\"User already added\");\r\n      return;\r\n    }\r\n  };\r\n\r\n  const removeUserHandler = async (handle) => {\r\n\r\n    if (handle === '') {\r\n      setAlertContent(\"Username not provided\");\r\n      return;\r\n    }\r\n\r\n    const index = handles.indexOf(handle);\r\n    if (index > -1) {\r\n      const removed = handles.splice(0);\r\n      removed.splice(index, 1);\r\n      localStorage.setItem(\"handles\", JSON.stringify(removed));\r\n      setHandles(removed);\r\n      setLastAction('remove');\r\n    } else {\r\n      setAlertContent(\"User to remove not found\");\r\n    }\r\n  };\r\n\r\n  const closeAlert = () => {\r\n    setAlertContent('');\r\n  }\r\n\r\n\r\n  const clearCacheButton =\r\n      <div className=\"btn\"\r\n        onClick={clearCacheHandler}\r\n        ref={(node) => {\r\n        if (node) {\r\n          node.style.setProperty(\"max-width\", \"300px\", \"important\");\r\n          node.style.setProperty(\"margin-bottom\", \"60px\");\r\n        }}}>Refresh</div>\r\n\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"section\">\r\n        <div className=\"body\">\r\n          <Theme />\r\n        </div>\r\n        <div style={header}>\r\n          <h2>Steam Social</h2>\r\n        </div>\r\n        <div className=\"body\">\r\n          <p style={{ ...alignCenter, ...marginBottom }}>\r\n            Compare Steam libraries to help organise online multiplayer sessions with your friends.\r\n          </p>\r\n          <p style={{ ...alignCenter, ...marginBottom }}>\r\n            To use the service, ensure the accounts you are comparing have both a public profile and a public games list.\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <div className=\"section\">\r\n        <div className=\"body\">\r\n          <UserList handles={handles} removeUserHandler={removeUserHandler} token={jwt} />\r\n          <UserAdd addUserHandler={addUserHandler} handleCount={handles.length} />\r\n          { handles.length < 2 ? <></> : clearCacheButton }\r\n        </div>\r\n      </div>\r\n      <div className=\"section\">\r\n        <div className=\"body\">\r\n          <GameList handles={handles} scroll={lastAction === 'add'} token={jwt} />\r\n        </div>\r\n      </div>\r\n      <Alert content={alertContent} onClose={closeAlert} />\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/app';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}